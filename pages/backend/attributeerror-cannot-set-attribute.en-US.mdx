---
title: "AttributeError: can't set attribute 'is_staff'"
image: https://www.tabnine.com/academy/wp-content/uploads/2020/10/academy_1.png
description: 'Error that happend while making superuser account for customized User model'
---

import Callout from 'nextra-theme-docs/callout'
import Bleed from 'nextra-theme-docs/bleed'
import { SiJavascript, SiPython } from 'react-icons/si'

# `AttributeError: can't set attribute 'is_staff'`

## What I Tried

I was trying to create superuser account with `python manage.py createsuperuser` command
for my customized `User` model built with `AbstractBaseUser`.

<br/>

## What Happened

I could suddenly see the `AttributeError` on the console.

```
Traceback (most recent call last):
  File "/Users/apensia/dev/letsh-api/manage.py", line 24, in <module>
    main()
  File "/Users/apensia/dev/letsh-api/manage.py", line 20, in main
    execute_from_command_line(sys.argv)
  File "/Users/apensia/dev/letsh-api/.venv/lib/python3.10/site-packages/django/core/management/__init__.py", line 446, in execute_from_command_line
    utility.execute()
  File "/Users/apensia/dev/letsh-api/.venv/lib/python3.10/site-packages/django/core/management/__init__.py", line 440, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/apensia/dev/letsh-api/.venv/lib/python3.10/site-packages/django/core/management/base.py", line 414, in run_from_argv
    self.execute(*args, **cmd_options)
  File "/Users/apensia/dev/letsh-api/.venv/lib/python3.10/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 87, in execute
    return super().execute(*args, **options)
  File "/Users/apensia/dev/letsh-api/.venv/lib/python3.10/site-packages/django/core/management/base.py", line 460, in execute
    output = self.handle(*args, **options)
  File "/Users/apensia/dev/letsh-api/.venv/lib/python3.10/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 232, in handle
    self.UserModel._default_manager.db_manager(database).create_superuser(
  File "/Users/apensia/dev/letsh-api/users/models.py", line 22, in create_superuser
    user.is_staff = True
AttributeError: can't set attribute 'is_staff'
```

<br/>

## Analysis

As we can literally tell from its error message, Django couldn't find `is_staff` attribute.

According to the comment that I found in <a href="https://stackoverflow.com/a/64102244/13121145" target="_blank">Stack Overflow</a>,
if there is no proper setter method for `@property` decorator, this error could happen.

## Solutions

### `User` model

`is_staff` is an attribute with `@property` decorator. This part is already included in my `User` model.

```py
class User(AbstractBaseUser):

    """Custom User Definition Model"""

    # Omitted

    @property
    def is_staff(self):
        return self.is_admin
```

<br/>

<CH.Scrollycoding>

### `Manager`

I looked at the problematic codes in `MyUserManager`.
There are another unnecessary attributes of `is_superuser` and `is_staff` besides of `is_admin`.

```py focus=15:16
class MyUserManager(BaseUserManager):
    def create_user(self, email, password=None, **extra_fields):
        if not email:
            raise ValueError(_("You must provide a valid email address."))

        user = self.model(email=self.normalize_email(email), **extra_fields)

        user.set_password(password)
        user.save(using=self._db)
        return user

    def create_superuser(self, email, password=None):
        user = self.create_user(email, password=password)
        user.is_admin = True
        user.is_superuser = True
        user.is_staff = True
        user.save(using=self._db)
        return user
```

---

### Deleting `is_staff`

Therefore, I deleted both unnecessary attributes of `is_superuser` and `is_staff`.

```py
class MyUserManager(BaseUserManager):
    def create_user(self, email, password=None, **extra_fields):
        if not email:
            raise ValueError(_("You must provide a valid email address."))

        user = self.model(email=self.normalize_email(email), **extra_fields)

        user.set_password(password)
        user.save(using=self._db)
        return user

    def create_superuser(self, email, password=None):
        user = self.create_user(email, password=password)
        user.is_admin = True
        user.save(using=self._db)
        return user
```

</CH.Scrollycoding>
