---
title: xcode-select Failed to locate 'clang', requesting installation of command line developer tools
image: https://www.tabnine.com/academy/wp-content/uploads/2020/10/academy_1.png
description: "poetryë¡œ psycopg2 íŒ¨í‚¤ì§€ ë„ì¤‘ ë°œìƒëœ ì—ëŸ¬"
---

import Callout from 'nextra-theme-docs/callout'
import Bleed from 'nextra-theme-docs/bleed'
import { SiJavascript, SiPython } from 'react-icons/si'

# `psycopg2` íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì—ëŸ¬

## ì‹œë„

poetryë¡œ ê°€ìƒí™˜ê²½ì„ ê¾¸ë¦¬ê³  ë‚˜ì„œ Djangoì™€ PostgreSQLë¥¼ ì—°ë™í•˜ê¸° ìœ„í•´ <a href="https://pypi.org/project/psycopg2/" target="_blank">psycopg2</a> íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³ ì í–ˆë‹¤.

<br/>

## ë¬¸ì œ ë°œìƒ

ì½˜ì†”ì— ê°‘ìê¸° ê¸´ ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜íƒ€ë‚¬ë‹¤.

```bash
> poetry add psycopg2
Using version ^2.9.3 for psycopg2

Updating dependencies
Resolving dependencies... (0.1s)

Package operations: 2 installs, 0 updates, 0 removals

  â€¢ Installing django-dotenv (1.4.2)
  â€¢ Installing psycopg2 (2.9.3): Failed

  CalledProcessError

  Command '['/Users/apensia/Library/Caches/pypoetry/virtualenvs/letsh-admin-zfYQThb9-py3.10/bin/python', '/Users/apensia/.local/pipx/venvs/poetry/lib/python3.10/site-packages/virtualenv/seed/wheels/embed/pip-22.2.2-py3-none-any.whl/pip', 'install', '--use-pep517', '--disable-pip-version-check', '--prefix', '/Users/apensia/Library/Caches/pypoetry/virtualenvs/letsh-admin-zfYQThb9-py3.10', '--no-deps', '/Users/apensia/Library/Caches/pypoetry/artifacts/53/f4/10/6c4fbf8671cd3e90cb0e036883b7aa9e49359e40fa11a699ffb31b2f2e/psycopg2-2.9.3.tar.gz']' returned non-zero exit status 1.

  at /opt/homebrew/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/subprocess.py:524 in run
       520â”‚             # We don't call process.wait() as .__exit__ does that for us.
       521â”‚             raise
       522â”‚         retcode = process.poll()
       523â”‚         if check and retcode:
    â†’  524â”‚             raise CalledProcessError(retcode, process.args,
       525â”‚                                      output=stdout, stderr=stderr)
       526â”‚     return CompletedProcess(process.args, retcode, stdout, stderr)
       527â”‚
       528â”‚

The following error occurred when trying to handle this error:


  EnvCommandError

  Command ['/Users/apensia/Library/Caches/pypoetry/virtualenvs/letsh-admin-zfYQThb9-py3.10/bin/python', '/Users/apensia/.local/pipx/venvs/poetry/lib/python3.10/site-packages/virtualenv/seed/wheels/embed/pip-22.2.2-py3-none-any.whl/pip', 'install', '--use-pep517', '--disable-pip-version-check', '--prefix', '/Users/apensia/Library/Caches/pypoetry/virtualenvs/letsh-admin-zfYQThb9-py3.10', '--no-deps', '/Users/apensia/Library/Caches/pypoetry/artifacts/53/f4/10/6c4fbf8671cd3e90cb0e036883b7aa9e49359e40fa11a699ffb31b2f2e/psycopg2-2.9.3.tar.gz'] errored with the following return code 1, and output:
  Processing /Users/apensia/Library/Caches/pypoetry/artifacts/53/f4/10/6c4fbf8671cd3e90cb0e036883b7aa9e49359e40fa11a699ffb31b2f2e/psycopg2-2.9.3.tar.gz
    Installing build dependencies: started
    Installing build dependencies: finished with status 'done'
    Getting requirements to build wheel: started
    Getting requirements to build wheel: finished with status 'done'
    Preparing metadata (pyproject.toml): started
    Preparing metadata (pyproject.toml): finished with status 'done'
  Building wheels for collected packages: psycopg2
    Building wheel for psycopg2 (pyproject.toml): started
    Building wheel for psycopg2 (pyproject.toml): finished with status 'error'
    error: subprocess-exited-with-error

    Ã— Building wheel for psycopg2 (pyproject.toml) did not run successfully.
    â”‚ exit code: 1
    â•°â”€> [77 lines of output]
        /private/var/folders/z_/h7g82ltn4px_w4m6d997tyqc0000gn/T/pip-build-env-jhthind1/overlay/lib/python3.10/site-packages/setuptools/config/setupcfg.py:508: SetuptoolsDeprecationWarning: The license_file parameter is deprecated, use license_files instead.
          warnings.warn(msg, warning_class)
        running bdist_wheel
        running build
        running build_py
        creating build
        creating build/lib.macosx-12-arm64-cpython-310
        creating build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/_json.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/extras.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/errorcodes.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/tz.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/_range.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/_ipaddress.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/__init__.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/extensions.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/errors.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/sql.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        copying lib/pool.py -> build/lib.macosx-12-arm64-cpython-310/psycopg2
        running build_ext
        building 'psycopg2._psycopg' extension
        creating build/temp.macosx-12-arm64-cpython-310
        creating build/temp.macosx-12-arm64-cpython-310/psycopg
        clang -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX12.sdk "-DPSYCOPG_VERSION=2.9.3 (dt dec pq3 ext lo64)" -DPSYCOPG_DEBUG=1 -DPG_VERSION_NUM=140005 -DHAVE_LO64=1 -DPSYCOPG_DEBUG=1 -I/Users/apensia/Library/Caches/pypoetry/virtualenvs/letsh-admin-zfYQThb9-py3.10/include -I/opt/homebrew/opt/python@3.10/Frameworks/Python.framework/Versions/3.10/include/python3.10 -I. -I/opt/homebrew/include/postgresql@14 -I/opt/homebrew/include/postgresql@14/server -I/opt/homebrew/Cellar/icu4c/70.1/include -I/opt/homebrew/opt/openssl@1.1/include -I/opt/homebrew/opt/readline/include -I/opt/homebrew/Cellar/lz4/1.9.4/include -c psycopg/adapter_asis.c -o build/temp.macosx-12-arm64-cpython-310/psycopg/adapter_asis.o
        2022-09-16 15:33:49.770 xcodebuild[1607:18240] [MT] DVTPlugInLoading: Failed to load code for plug-in com.apple.dt.IDESimulatorAvailability (/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin), error = Error Domain=NSCocoaErrorDomain Code=3588 "dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0109): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)
          Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'
          Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator'" UserInfo={NSLocalizedFailureReason=The bundle couldnâ€™t be loaded., NSLocalizedRecoverySuggestion=Try reinstalling the bundle., NSFilePath=/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, NSDebugDescription=dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0109): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)
          Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'
          Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator', NSBundlePath=/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin, NSLocalizedDescription=The bundle â€œIDESimulatorAvailabilityâ€ couldnâ€™t be loaded.}, dyldError = dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0000): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)
          Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'
          Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator'
        2022-09-16 15:33:49.792 xcodebuild[1607:18240] [MT] DVTAssertions: ASSERTION FAILURE in /System/Volumes/Data/SWE/Apps/DT/BuildRoots/BuildRoot2/ActiveBuildRoot/Library/Caches/com.apple.xbs/Sources/DVTFrameworks/DVTFrameworks-21303/DVTFoundation/PlugInArchitecture/DataModel/DVTPlugIn.m:374
        Details:  Failed to load code for plug-in com.apple.dt.IDESimulatorAvailability (/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin)
        Please ensure Xcode packages are up-to-date â€” try running 'xcodebuild -runFirstLaunch'.

        NSBundle error: Error Domain=NSCocoaErrorDomain Code=3588 "dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0109): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)
          Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'
          Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator'" UserInfo={NSLocalizedFailureReason=The bundle couldnâ€™t be loaded., NSLocalizedRecoverySuggestion=Try reinstalling the bundle., NSFilePath=/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, NSDebugDescription=dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0109): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)
          Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'
          Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator', NSBundlePath=/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin, NSLocalizedDescription=The bundle â€œIDESimulatorAvailabilityâ€ couldnâ€™t be loaded.}
        Object:   <DVTPlugIn: 0x10d35bee0>
        Method:   -loadAssertingOnError:error:
        Thread:   <_NSMainThread: 0x13360c9b0>{number = 1, name = main}
        Hints:

        Backtrace:
          0  0x0000000102939410
          1  0x0000000102938aec
          2  0x0000000102938c6c
          3  0x00000001027e72ac
          4  0x00000001027ad118
          5  0x00000001027ab528
          6  0x00000001862941b4
          7  0x00000001862a3414
          8  0x000000010297d58c
          9  0x00000001029594b0
         10  0x00000001027ab3c0
         11  0x00000001027ab5e0
         12  0x000000010386f2ec
         13  0x000000010386eae0
         14  0x000000010386e1e8
         15  0x0000000101050324
         16  0x0000000101001e0c
        sh: line 1:  1609 Abort trap: 6           /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -sdk /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -find clang 2> /dev/null
        clang: error: sh -c '/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -sdk /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -find clang 2> /dev/null' failed with exit code 34304: (null) (errno=Invalid argument)
        xcode-select: Failed to locate 'clang', requesting installation of command line developer tools.

        It appears you are missing some prerequisite to build the package from source.

        You may install a binary package by installing 'psycopg2-binary' from PyPI.
        If you want to install psycopg2 from source, please install the packages
        required for the build and try again.

        For further information please check the 'doc/src/install.rst' file (also at
        <https://www.psycopg.org/docs/install.html>).

        error: command '/usr/bin/clang' failed with exit code 72
        [end of output]

    note: This error originates from a subprocess, and is likely not a problem with pip.
    ERROR: Failed building wheel for psycopg2
  Failed to build psycopg2
  ERROR: Could not build wheels for psycopg2, which is required to install pyproject.toml-based projects


  at ~/.local/pipx/venvs/poetry/lib/python3.10/site-packages/poetry/utils/env.py:1473 in _run
      1469â”‚                 output = subprocess.check_output(
      1470â”‚                     command, stderr=subprocess.STDOUT, env=env, **kwargs
      1471â”‚                 )
      1472â”‚         except CalledProcessError as e:
    â†’ 1473â”‚             raise EnvCommandError(e, input=input_)
      1474â”‚
      1475â”‚         return decode(output)
      1476â”‚
      1477â”‚     def execute(self, bin: str, *args: str, **kwargs: Any) -> int:

The following error occurred when trying to handle this error:


  PoetryException

  Failed to install /Users/apensia/Library/Caches/pypoetry/artifacts/53/f4/10/6c4fbf8671cd3e90cb0e036883b7aa9e49359e40fa11a699ffb31b2f2e/psycopg2-2.9.3.tar.gz

  at ~/.local/pipx/venvs/poetry/lib/python3.10/site-packages/poetry/utils/pip.py:51 in pip_install
       47â”‚
       48â”‚     try:
       49â”‚         return environment.run_pip(*args)
       50â”‚     except EnvCommandError as e:
    â†’  51â”‚         raise PoetryException(f"Failed to install {path.as_posix()}") from e
       52â”‚
```

<br/>

## ë¬¸ì œ ë¶„ì„

ì œì¼ í•µì‹¬ì ì¸ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ì´ macOSì˜ Command Line Tools Package ì¤‘ í•˜ë‚˜ì¸ Clangê³¼ ê´€ë ¨ëœ ë¬¸ì œì²˜ëŸ¼ ë³´ì˜€ë‹¤.
ì—¬ê¸°ì„œ Command Line Tools PackageëŠ” macOSì—ì„œ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ì—¬ ê°œë°œì„ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” Xcodeì™€ ë³„ê°œë¡œ ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ ìˆëŠ” ì¼ì¢…ì˜ ì‘ì€ íŒ¨í‚¤ì§€ì´ë‹¤.[^1]

`xcode-select: Failed to locate 'clang', requesting installation of command line developer tools.`

## ë¬¸ì œ í•´ê²°

í•´ë‹¹ ë¬¸ì œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë¶„ì„í•´ë³´ì•˜ë‹¤.

1. M1 ì¹©ê³¼ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ê²½ìš° &rarr; ë‹¤ë¥¸ íŒ¨í‚¤ì§€ë¥¼ ì¨ë³´ì
2. Command Line Developer Tools ë¬¸ì œì˜ ê²½ìš°

<br/>

### ì‹œë„1 &rarr; ğŸ˜“ ì‹¤íŒ¨

ì½˜ì†”ì—ì„œ ì–˜ê¸°í•´ì¤€ëŒ€ë¡œ, psycopg2ë¥¼ ëŒ€ì‹ í•  ìˆ˜ ìˆëŠ” <a href="https://pypi.org/project/psycopg2-binary/" target="_blank">psycopg2-binary</a> íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•´ë³´ëŠ” ê²ƒì€ ì–´ë–¨ê¹Œ ìƒê°í–ˆë‹¤.

í•˜ì§€ë§Œ ì—¬ì „íˆ ìœ„ì™€ ë˜‘ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì—¬ê¸°ì„œ ì•Œ ìˆ˜ ìˆëŠ” ì ì€ M1 ì¹©ê³¼ í˜¸í™˜ì´ ë˜ì§€ ì•ŠëŠ” ê²ƒì˜ ì—¬ë¶€ëŠ” ì´ ë¬¸ì œì™€ ì „í˜€ ìƒê´€ì—†ì–´ ë³´ì˜€ë‹¤.

<br/>

### ì‹œë„2 &rarr; ğŸ˜Š ì„±ê³µ

Stack Overflow ì‚¬ì´íŠ¸ì—ì„œ <a href="https://apple.stackexchange.com/questions/415563/repeatedly-being-asked-to-install-command-line-tools/446563#446563" target="_blank">êµ¬ê¸€ë§í•´ë³¸ ê²°ê³¼</a> ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.

`sudo xcode-select -switch /Library/Developer/CommandLineTools`

ê·¸ë¦¬ê³  <a href="https://apple.stackexchange.com/a/446624" target="_blank">ë°”ë¡œ ì•„ë˜ ë‹µê¸€ì—ì„œ</a> í™•ì¸í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒì´ M1 ì¹©ì˜ Monterey 12.6 ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•œ ì´í›„ Xcode CLI tools 14.0 ë²„ì „ì„ ì„¤ì¹˜í•œ ì´í›„
ë¬¸ì œê°€ ë°œìƒë˜ì—ˆë‹¤ê³  í•œë‹¤. ì—­ì‹œ macOSì˜ ì—…ë°ì´íŠ¸ëŠ” í•­ìƒ ë‚  ì´ë ‡ê²Œ í˜ë“¤ê²Œ í•œë‹¤.

~~ê·¸ë ‡ë‹¤ë©´ ì—¬íƒœê¹Œì§€ Djangoë‚˜ Pillow ê°™ì€ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ë“¤ì€ ì–´ë–»ê²Œ ì„¤ì¹˜ê°€ ëœ ê±°ì§€?~~

<br/>

## ì°¸ê³  ìë£Œ

[^1]:
      <a href="https://developer.apple.com/library/archive/technotes/tn2339/_index.html" target="_blank">What is the Command Line Tools Package?</a>
